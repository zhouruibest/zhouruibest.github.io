# 文本模式和二进制模式
所有文件的内容都是以二进制形式存储的。

如果文件最初使用**二进制编码的字符**（例如，ASCII或Unicode）表示文本（就像C字符串那样），该文件就是文本文件，其中包含文本内容。如果文件中的二进制值代表**机器语言代码或数值数据**（使用相同的内部表示，假设，用于long或
double类型的值）或图片或音乐编码，该文件就是二进制文件，其中包含二进制内容

**UNIX/Linux用同一种文件格式处理文本文件和二进制文件的内容。**不奇怪，鉴于C是作为开发UNIX的工具而创建的，C和UNIX在文本中都使用\n（换行符）表示换行。

为了规范文本文件的处理，**C提供两种访问文件的途径：二进制模式和文本模式。**

在二进制模式中，程序可以访问文件的每个字节。而在文本模式中，程序所见的内容和文件的实际内容不同。程序以文本模式读取文件时，把本地环境表示的行末尾或文件结尾映射为C模式。例如，C程序在旧式Macintosh中以文本模式读取文件时，把文件中的\r转换成\n；以文本模式写入文件时，把\n转换成\r。或者，C文本模式程序在MS-DOS平台读取文件时，把\r\n转换成\n；写入文件时，把\n转换成\r\n。在其他环境中编写的文本模式程序也会做类似的转换。

# 标准I/O

与底层I/O相比，标准I/O包除了可移植以外还有两个好处。第一，标准I/O有许多专门的函数简化了处理不同I/O的问题。例如，printf()把不同形式的数据转换成与终端相适应的字符串输出。第二，输入和输出都是缓冲的。也就是说，一次转移一大块信息而不是一字节信息（通常至少512字节）。例如，当程序读取文件时，一块数据被拷贝到缓冲区（一块中介存储区域）。这种缓冲极大地提高了数据传输速率。程序可以检查缓冲区中的字节。缓冲在后台处理，所以让人有逐字符访问的错觉（如果使用底层I/O，要自己完成大部分工作）

# fopen

fopen的第二个参数是一个字符串，指定了打开文件的模式。例如

|模式字符串|含义||
|-|-|-|
|"r"|||
|"w"|||
|"a"|||
|"rb", "wb", "ab", "ab+"|以二进制模式而不是以文本模式打开文件|

像UNIX和Linux这样只有一种文件类型的系统，带b字母的模式和不带b自摸的模式相同