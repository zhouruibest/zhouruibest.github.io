Elasticsearch集群角色类型

# 角色划分：
- master：该节点不和应用创建连接，主要用于元数据(metadata)的处理，比如索引的新增、删除、分片分配等，master节点不占用io和CPU，内存使用量一般
- data：该节点和索引应用创建连接、接收索引请求，该节点真正存储数据，ES集群的性能取决于该节点的个数（每个节点最优配置的情况下），data节点会占用大量的CPU、io和内存。
- client：该节点和检索应用创建连接、接受检索请求，但其本身不负责存储数据，可当负责均衡节点，

# 各节点间的关系
- master：master节点具备主节点的选举权，有资格成为主节点，主节点控制整个集群的元数据。
- data：data节点的分片执行查询语句获得查询结果后将结果反馈给client。此过程较消耗硬件资源。
- client：client节点接受搜索请求后将请求转发到与查询条件相关的多个data节点的分片上，然后多个data节点的分片执行查询语句或者查询结果再返回给client节点，client来把各个data节点的返回结果进行整合、排序等一系列操作后再将最终结果返回给用户请求。

# 资源规划
master节点：ES如果做集群的话Master节点至少三台服务器或者三个Master实例加入相同集群，三个Master节点最多只能故障一台Master节点，亲测，如果故障两个Master节点，ES将无法组成集群。
data节点：单个索引在一个data节点上分片数保持在3个以内；每1GB堆内存对应集群的分片保持在20个以内；每个分片不要超过30G；
client节点：增加client节点可增加检索并发,但检索的速度还是取决于查询所命中的分片个数以及分片中的数据量。

data节点经验：
- 如果单索引每个节点可支撑90G数据，依此可计算出所需data节点数 。
- 如果是多索引按照单个data节点jvm内存最大30G来计算，一个节点的分片保持在600个以内，存储保持在18T以内。
- 主机的cpu、io固定，建议一台主机只部署一个data节点，不同角色节点独立部署，方便扩容
- 每条数据保持在2k以下索引性能大约3000-5000条/s/data节点，增加data节点数可大幅度增加索引速率，节点数与索引效率的增长关系呈抛物线形状​
