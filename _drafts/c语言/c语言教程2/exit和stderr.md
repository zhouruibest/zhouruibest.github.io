程序使用了标准库函数 exit，当该函数被调用时，它将终止调用程序的执行。任 何调用该程序的进程都可以获取 exit 的参数值，因此，可通过另一个将该程序作为子进程的 程序来测试该程序的执行是否成功。按照惯例，返回值 0 表示一切正常，而非 0 返回值通常 表示出现了异常情况。**exit 为每个已打开的输出文件调用 fclose 函数，以将缓冲区中的所 有输出写到相应的文件中。**

```c
if (ferror(stdout)) {
    fprintf(stderr, "%s: error writing stdout\n", prog);
    exit(2);
}
```
如果流 fp 中出现错误，则函数 `ferror` 返回一个非 0 值。
   `int ferror(FILE *fp)`
尽管输出错误很少出现，但还是存在的(例如，当磁盘满时)，因此，成熟的产品程序应该检 查这种类型的错误。
函数 `feof(FILE *)`与 `ferror` 类似。如果指定的文件到达文件结尾，它将返回一个非 0值。
   `int feof(FILE *fp)`
